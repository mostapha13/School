#pragma checksum "C:\Users\mostapha\source\repos\IranSmartSchool\SchoolSystem\Views\Management\IndexPartial\LoginByUserAndPassword.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "91626854b293b25d405911c9ba8261a413f9e0e7"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Management_IndexPartial_LoginByUserAndPassword), @"mvc.1.0.view", @"/Views/Management/IndexPartial/LoginByUserAndPassword.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 2 "C:\Users\mostapha\source\repos\IranSmartSchool\SchoolSystem\Views\_ViewImports.cshtml"
using SchoolSystem.Models.Home;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\mostapha\source\repos\IranSmartSchool\SchoolSystem\Views\_ViewImports.cshtml"
using SchoolSystem.Models.Management;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"91626854b293b25d405911c9ba8261a413f9e0e7", @"/Views/Management/IndexPartial/LoginByUserAndPassword.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"115745a9cdd022c73a79d01a0c8e65bb2248762e", @"/Views/_ViewImports.cshtml")]
    public class Views_Management_IndexPartial_LoginByUserAndPassword : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/Pic/user.png"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/Pic/lock.png"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/Pic/presentation (1).png"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral(@"



<div class=""box-shadow "">

    <div class=""box-body"">

        <div class=""container p-0"">

            <div class=""row"">
                <div class=""col-12"">
                    <div style=""font-size:22px;font-weight:600;text-align:center;"">ورود به صفحه گزارش استانی مدارس</div>


                    <hr />
                </div>

                <div class=""col-lg-7 text-center"">

                    <label class=""lable text-right"" style=""color:rgb(100,100,100);"">نام کاربری</label>

                    <div style=""direction:rtl;border:1px solid rgb(150,150,150);padding:5px;"">
                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "91626854b293b25d405911c9ba8261a413f9e0e75032", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                        <input id=""txtUsername"" type=""text"" class=""text-box"" style=""border:none;outline:none;width:calc(100% - 45px)"" placeholder=""نام کاربری خود را وارد نمایید"" />
                    </div>

                    <label class=""lable text-right"" style=""color:rgb(100,100,100);"">رمز عبور</label>
                    <div style=""direction:rtl;border:1px solid rgb(150,150,150);padding:5px;"">
                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "91626854b293b25d405911c9ba8261a413f9e0e76511", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                        <input id=""txtPassword"" type=""password"" class=""text-box"" style=""border:none;outline:none;width:calc(100% - 45px)"" placeholder=""رمز عبور خود را وارد نمایید"" />
                    </div>

                    <br />
                    <br />

                    <div style=""display:flex;flex-direction:row;justify-content:space-between;"">

                        <button id=""btnLogin"" class=""btn btn-lg btn-outline-primary"" style=""min-width:150px;"">ورود</button>


                        <button class=""btn-prev btn btn-outline-warning btn-lg"" onclick=""window.location.href='/'"">برگشت به صفحه اصلی</button>

                    </div>

                </div>

                <div class=""col-lg-5 d-none d-lg-block"">



                    <div style=""display:flex;align-items:center;justify-content:center;height:100%;"">
                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("img", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.SelfClosing, "91626854b293b25d405911c9ba8261a413f9e0e78460", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                    </div>

                </div>

            </div>

        </div>

    </div>

</div>

<script>


    $(""#btnLogin"").on(""click"", function () {

        $(""#btnLogin"").attr(""disabled"", true);
        $(""#btnLogin"").html('در حال پردازش <div class=""spinner-grow text-primary"" role=""status""></div>')

        var row = $(this).closest("".box-shadow"").parent();

        var model = { username: """", password: """" };
        model.username = $(""#txtUsername"").val();
        model.password = $(""#txtPassword"").val();

        $.ajax({
            url: ""/Management/GenerateToken"",
            method: ""POST"",
            data: model,
            success: function (res) {
                $(""#btnLogin"").attr(""disabled"", false);
                $(""#btnLogin"").html('ورود')

                $(""#btnLogin"").attr(""disabled"", false);
                $(""#btnLogin"").html('در حال پردازش <div class=""spinner-grow text-primary"" role=""status""></div>')

                token = ""bear");
            WriteLiteral(@"er "" + res;
                localStorage.setItem(""Token"", token);
                $(row).addClass(""d-none"");
                $(row).next().removeClass(""d-none"");
                $(window).scrollTop(0);
                LoadGrid();

            },
            error: function (err) {

                $(""#btnLogin"").attr(""disabled"", false);
                $(""#btnLogin"").html('ورود')

                Swal.fire({
                    title: '',
                    html: ""<span style='font-family:Behdad;'><span style='font-size:18px;'>"" + err.responseText + ""</span></span>"",
                    type: 'error',
                    showCancelButton: false,
                    showConfirmButton: false
                });

            }
        });

    });

</script>

<script>

    function LoadGrid() {
        debugger;
        $(""#grid"").kendoGrid({
            dataSource: {
                transport: {
                    read: {
                        url: ""/Management/ReportScho");
            WriteLiteral(@"olPerOstan"",
                        type: 'POST',
                        beforeSend: function (req) {
                            req.setRequestHeader('Authorization', token);
                        }
                    }
                },
                schema: {
                    data: ""data"",
                    total: ""total""
                },
                pageSize: 5,
                serverPaging: false,
                serverOperation: false,
                serverFiltering: false
            },
            pageable: true,
            scrollable: false,
            sortable: true,
            detailInit: detail,


            dataBound: function (e) {

                var grid = this;

                grid.tbody.find("".done"").each(function (e) {

                    var row = $(this).closest(""tr"");

                    var model = grid.dataItem(row);

                    $(this).kendoProgressBar({
                        max: model.total,
                   ");
            WriteLiteral(@"     value: model.done
                    });

                    $(this).find("".k-state-selected"").each(function () {
                        $(this).css({
                            ""background-color"": ""rgb(25, 224, 109)"", ""border-color"": ""rgb(25, 224, 109)""
                        });
                    });

                });

                grid.tbody.find("".remain"").each(function (e) {

                    var row = $(this).closest(""tr"");

                    var model = grid.dataItem(row);

                    $(this).kendoProgressBar({
                        max: model.total,
                        value: (model.total - model.done)
                    });

                    $(this).find("".k-state-selected"").each(function () {
                        $(this).css({
                            ""background-color"": ""rgb(255, 189, 0)"", ""border-color"": ""rgb(255, 189, 0)""
                        });
                    });

                });

            },
         ");
            WriteLiteral(@"   columns: [
                {
                    field: ""ostanName"",
                    title: ""استان"",
                    width: ""100px"",
                    attributes: {
                        style: ""text-align:center;""
                    }
                },
                {
                    field: ""done"",
                    title: ""انجام شده"",
                    template: ""<div class='done' style='height:20px;font-size:12px;width:95%;'></div>"",
                    width: ""100px"",
                    attributes: {
                        style: ""text-align:center;""
                    }
                },
                {
                    field: ""remain"",
                    title: ""مانده"",
                    template: ""<div class='remain' style='height:20px;font-size:12px;width:95%;'></div>"",
                    width: ""100px"",
                    attributes: {
                        style: ""text-align:center;""
                    }
                }
       ");
            WriteLiteral(@"     ],
            toolbar: [
                {
                    template: '<div class=""k-button k-button-icontext"" onClick=""downloadExcel()""><span class=""k-icon k-i-file-excel""></span>دانلود اکسل</div>'
                }
            ]
        });
    }




    function detail(e) {

        var amarcode = e.data.amarcode;

        $(""<div/>"").appendTo(e.detailCell).kendoGrid({

            dataSource: {
                type: ""aspnetmvc-ajax"",
                transport: {
                    read: {
                        url: ""/Management/ReportSchoolPerOstanDetails?amarcode="" + amarcode,
                        type: ""POST"",
                        beforeSend: function (req) {
                            req.setRequestHeader('Authorization', token);
                        }
                    }
                },

                schema: {
                    data: ""data"",
                    total: ""total""
                },
                pageSize: 5,
            ");
            WriteLiteral(@"    serverPaging: true,
                serverOperation: true,
                serverFiltering: true
            },
            pageable: {
                pageSizes: false
            },
            filterable: {
                mode: ""menu"",
                extra: false,
                operators: {
                    ""string"": {
                        ""contains"": ""شامل شود به""
                    }
                }
            },
            scrollable: true,
            sortable: false,
            columns: [
                {
                    field: ""name"", title: ""مدرسه"", attributes: { style: ""text-align:center;"" }
                },
                { field: ""isCity"", title: ""محل استقرار"", attributes: { style: ""text-align:center;"" }, filterable: { ui: isCityFilter }, media: ""(min-width: 600px)"" },
                { field: ""managerName"", title: ""مدیر"", attributes: { style: ""text-align:center;"" }, media: ""(min-width: 600px)"" },
                { field: ""managerMobile"", title:");
            WriteLiteral(@" ""تلفن همراه مدیر"", attributes: { style: ""text-align:center;"" }, media: ""(min-width: 800px)"" },
         
                { field: ""insertDate"", title: ""تاریخ ویرایش"", filterable: persianDateFilter, attributes: { style: ""text-align:center;"" }, media: ""(min-width: 1000px)"" },
                {
                    field: ""status"",
                    title: ""وضعیت"", attributes: { style: ""text-align:center;"" },
                    template: function (item) {

                        if (item.status == 0) {
                            return ""<div class='SchoolStatus' style='background-color:#ffc107;color:#212529;'>در انتظار ویرایش</div>"";
                        }
                        else if (item.status == 1) {
                            return ""<div class='SchoolStatus' style='background-color:#adb5bd;color:#212529;'>در انتظار تایید موقعیت</div>"";
                        }
                        else if (item.status == 2) {
                            return ""<div class='SchoolStatus' styl");
            WriteLiteral(@"e='background-color:#495057;'>در انتظار تایید اطلاعات</div>"";
                        }
                        else if (item.status == 3) {
                            return ""<div class='SchoolStatus' style='background-color:#212529;'>در انتظار تایید اطلاعات و موقعیت</div>"";
                        }
                        else if (item.status == 4) {
                            return ""<div class='SchoolStatus' style='background-color:#28a745;'>تایید نهایی</div>"";
                        }
                        else if (item.status == 5) {
                            return ""<div class='SchoolStatus' style='background-color:#dc3545;'>رد شده</div>"";
                        }
                    }
                    , filterable: { ui: statusFilter }
                },
                //{ field: ""editCount"", title: ""تعداد فیلد های ویرایش شده"", width: ""250px"", filterable: false, media: ""(min-width: 1200px)"" },
                { command: { text: ""نمایش"", click: schoolPreview }, attributes: {");
            WriteLiteral(@" style: ""text-align:center;"" }, title: ""عملیات"", media: ""(min-width: 400px)"" }


            ]

        });

  
    }

    function isCityFilter(element) {

        var form = element.closest(""form"");
        form.find(""select"").remove();

        element.kendoDropDownList({
            dataSource: new kendo.data.DataSource({
                data: [
                    { text: ""شهری"", value: ""شهری"" },
                    { text: ""روستایی"", value: ""روستایی"" }
                ]
            }),
            dataTextField: ""text"",
            dataValueField: ""value"",
            optionLabel: ""انتخاب کنید"",

        });

    }


    function statusFilter(element) {

        var form = element.closest(""form"");
        form.find(""select"").remove();

        element.kendoDropDownList({
            dataSource: new kendo.data.DataSource({
                data: [
                    { text: ""در انتظار ویرایش"", value: ""0"" },
                    { text: ""در انتظار تایید موقعیت"", valu");
            WriteLiteral(@"e: ""1"" },
                    { text: ""در انتظار تایید اطلاعات"", value: ""2"" },
                    { text: ""در انتظار تایید اطلاعات و موقعیت"", value: ""3"" },
                    { text: ""تایید نهایی"", value: ""4"" },
                    { text: ""رد شده"", value: ""5"" }
                ]
 

    }),
            dataTextField: ""text"",
            dataValueField: ""value"",
            optionLabel: ""انتخاب کنید""
        });


    }


    function schoolPreview(e) {

        e.preventDefault();
        e.stopPropagation();

        var dataItem = this.dataItem($(e.currentTarget).closest(""tr""));

        var a = document.createElement(""a"");

        a.name = ""schoolPreview1399"";
        a.id = ""schoolPreview1399"";

        a.href = ""/Management/SchoolDetails?mainCode="" + dataItem.mainCode;

        a.target = ""_blank"";

        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);

    }

    function downloadExcel(e) {

        Swal.fire({
      ");
            WriteLiteral(@"      allowOutsideClick: false,
            title: '',
            text: 'لطفا کمی صبر کنید',
            type: '',
            onBeforeOpen: () => {
                Swal.showLoading();
            }
        });

        $.ajax({
            url: ""/Management/ReportSchoolDownloadExcel"",
            type: ""GET"",
            headers: {
                ""Authorization"": token
            },
            xhrFields: {
                responseType: 'blob'
            },
            success: function (data) {
                var a = document.createElement('a');
                var url = window.URL.createObjectURL(data);
                a.name = ""schoolExcel1399"";
                a.id = ""schoolExcel1399"";
                a.href = url;
                a.download = 'ReportSchool.xlsx';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            },
            error: functio");
            WriteLiteral("n (err) {\r\n                console.log(err, \"Error\");\r\n            },\r\n            complete: function (request, status) {\r\n                Swal.close();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n</script>\r\n\r\n \r\n");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
